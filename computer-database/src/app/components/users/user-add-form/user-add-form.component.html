<div class="registerbox">
    <mat-dialog-content class="mat-dialog">
        <form class="SignUpForm" [formGroup]="addUserForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <mat-label>{{ 'USER.ROLE' | translate }} :</mat-label>
                <mat-select  [(ngModel)]="user.roles" multiple name="rolesSelected" class="select" formControlName="rolesSelected" [ngClass]="{'is-invalid': submitted && addUserForm.get('rolesSelected').hasError('rolesEmpty')}">
                  <mat-option class="select" *ngFor="let role of rolesPossibles" [value]="role" > {{role.name}} </mat-option>
                </mat-select>
              <div *ngIf="submitted && addUserForm.get('rolesSelected').hasError('rolesEmpty')" class="invalid-input">Must have at least one role</div>
            </div>
            <div class="form-group">
                <mat-label>{{ 'USER.USERNAME' | translate }} :</mat-label>
                <input [(ngModel)]="user.name" id="username" name="username" required="required" placeholder="{{ 'USER.USERNAME' | translate }}"
                    class="form-control mr-sm-2 home_input" formControlName="name" [ngClass]="{'is-invalid':  submitted && (addUserForm.get('name').hasError('nameTooShort') || addUserForm.get('name').hasError('nameRequired') )}"/>
                <div *ngIf="submitted && addUserForm.get('name').hasError('nameTooShort')" class="invalid-input">Name must contain at least 4 characteres</div>
                <div *ngIf="submitted && addUserForm.get('name').hasError('nameRequired')" class="invalid-input">Name is required</div>
            </div>

            <div class="form-group">
                <mat-label>{{ 'USER.PASSWORD' | translate }} :</mat-label>
                <input [(ngModel)]="user.password" type="password" class="form-control mr-sm-2 home_input" id="password" name="password"
                    required="required" placeholder="{{ 'USER.PASSWORD' | translate }}" formControlName="password" [ngClass]="{'is-invalid':  submitted && (addUserForm.get('password').hasError('nameRequired') || addUserForm.get('password').hasError('passwordTooShort'))}"/>
              <div *ngIf="submitted && addUserForm.get('password').hasError('nameRequired')" class="invalid-input">Password is required</div>
              <div *ngIf="submitted && addUserForm.get('password').hasError('passwordTooShort')" class="invalid-input">Password must contain at least 8 characteres</div>
            </div>

            <div class="form-group">
                <mat-label>{{ 'USER.CONFIRMPASSWORD' | translate }} : </mat-label>
                <input [(ngModel)]="passwordSecond" type="password" class="form-control mr-sm-2 home_input" id="passwordConfirm"
                    name="passwordConfirm" formControlName="confirmPassword" required="required" placeholder="{{ 'USER.PASSWORD' | translate }}"
                       [ngClass]="{'is-invalid': submitted && ((addUserForm.errors && addUserForm.errors.noMatchingPassword) || addUserForm.get('confirmPassword').hasError('nameRequired'))}"/>
              <div *ngIf="submitted && addUserForm.get('confirmPassword').hasError('nameRequired')" class="invalid-input">Confirm Password is required</div>
              <div *ngIf="submitted && addUserForm.errors && addUserForm.errors.noMatchingPassword" class="invalid-input">{{addUserForm.errors.noMatchingPassword}}</div>
            </div>

            <br>
            <div class="inline">
              <input type="submit" class="btn btn-primary" value="{{ 'USER.SUBMIT' | translate }}"/>
              <button [mat-dialog-close]="false" class="btn btn-primary" mat-button>{{ 'USER.CANCEL' | translate }}</button>
            </div>
        </form>
    </mat-dialog-content>
</div>
